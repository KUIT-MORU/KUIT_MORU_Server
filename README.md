# 🧪 MORU 서버 테스트 브랜치

## 📋 브랜치 정보
- **브랜치명**: `test/#20-set-dummy-data`
- **목적**: API 테스트를 위한 더미데이터 설정
- **생성일**: 2024년 12월

## 🎯 목표
MORU 서버의 모든 API 엔드포인트를 테스트할 수 있는 포괄적인 더미데이터를 제공합니다.

## 📊 생성된 더미데이터

### 👥 사용자 데이터 (5명)
| ID | 이메일 | 닉네임 | 성별 | 생년월일 | 소개 |
|---|---|---|---|---|---|
| `550e8400-e29b-41d4-a716-446655440001` | test1@example.com | 김철수 | MALE | 1995-03-15 | 운동을 좋아하는 김철수입니다. |
| `550e8400-e29b-41d4-a716-446655440002` | test2@example.com | 이영희 | FEMALE | 1992-07-22 | 요리와 독서를 즐기는 이영희입니다. |
| `550e8400-e29b-41d4-a716-446655440003` | test3@example.com | 박민수 | MALE | 1988-11-08 | 프로그래밍과 게임을 좋아합니다. |
| `550e8400-e29b-41d4-a716-446655440004` | test4@example.com | 최지영 | FEMALE | 1990-05-30 | 여행과 사진 촬영을 즐깁니다. |
| `550e8400-e29b-41d4-a716-446655440005` | test5@example.com | 정수민 | MALE | 1993-09-12 | 음악과 영화를 좋아하는 정수민입니다. |

**공통 비밀번호**: `spring12!` (BCrypt 해시: `$2a$10$SUKPX4PRaPeNnPjG8r7oJOoPrDGFw4SwQTk/sGz.js2NkaljfIkAi`)

### 🏷️ 태그 데이터 (10개)
| ID | 태그명 |
|---|---|
| `660e8400-e29b-41d4-a716-446655440001` | 운동 |
| `660e8400-e29b-41d4-a716-446655440002` | 요리 |
| `660e8400-e29b-41d4-a716-446655440003` | 독서 |
| `660e8400-e29b-41d4-a716-446655440004` | 공부 |
| `660e8400-e29b-41d4-a716-446655440005` | 게임 |
| `660e8400-e29b-41d4-a716-446655440006` | 음악 |
| `660e8400-e29b-41d4-a716-446655440007` | 영화 |
| `660e8400-e29b-41d4-a716-446655440008` | 여행 |
| `660e8400-e29b-41d4-a716-446655440009` | 프로그래밍 |
| `660e8400-e29b-41d4-a716-446655440010` | 사진 |

### 🏃‍♂️ 루틴 데이터 (10개)
| ID | 사용자 | 제목 | 타입 | 소요시간 | 좋아요 수 |
|---|---|---|---|---|---|
| `770e8400-e29b-41d4-a716-446655440001` | 김철수 | 아침 운동 루틴 | 복합 | 30분 | 15 |
| `770e8400-e29b-41d4-a716-446655440002` | 김철수 | 저녁 헬스 루틴 | 복합 | 1시간 | 8 |
| `770e8400-e29b-41d4-a716-446655440003` | 이영희 | 주말 요리 루틴 | 복합 | 2시간 | 23 |
| `770e8400-e29b-41d4-a716-446655440004` | 이영희 | 독서 시간 | 단순 | 45분 | 12 |
| `770e8400-e29b-41d4-a716-446655440005` | 박민수 | 프로그래밍 공부 | 복합 | 1시간 30분 | 5 |
| `770e8400-e29b-41d4-a716-446655440006` | 박민수 | 게임 시간 | 단순 | 1시간 | 3 |
| `770e8400-e29b-41d4-a716-446655440007` | 최지영 | 사진 촬영 | 복합 | 1시간 15분 | 18 |
| `770e8400-e29b-41d4-a716-446655440008` | 최지영 | 영화 감상 | 단순 | 2시간 | 7 |
| `770e8400-e29b-41d4-a716-446655440009` | 정수민 | 음악 연습 | 복합 | 45분 | 9 |
| `770e8400-e29b-41d4-a716-446655440010` | 정수민 | 아침 명상 | 단순 | 20분 | 14 |

### 📱 App 데이터 (4개)
| ID | 이름 | 패키지명 |
|---|---|---|
| `a1b2c3d4-e5f6-7890-abcd-ef1234567890` | 카카오톡 | com.kakao.talk |
| `b2c3d4e5-f678-90ab-cdef-2345678901ab` | 인스타그램 | com.instagram.android |
| `c3d4e5f6-7890-abcd-ef12-345678901abc` | 유튜브 | com.google.android.youtube |
| `d4e5f678-90ab-cdef-1234-5678901abcde` | 네이버 | com.naver.app |

> **참고:**
> - app 테이블은 id, name, package_name만 NOT NULL입니다.
> - data.sql에 더미 App 데이터가 포함되어 있습니다.
> - 실제 서비스에서는 필요에 따라 컬럼을 확장하세요.

### 📝 루틴 스텝 데이터 (21개)
각 루틴별로 1-4개의 스텝이 포함되어 있습니다.

### 🔗 관계 데이터
- **루틴 태그 연결**: 12개
- **사용자 팔로우**: 5개
- **사용자 선호 태그**: 7개
- **루틴 로그**: 7개 (최근 7일간)
- **루틴 스케줄**: 42개 (루틴별 요일별 스케줄)

## 🚀 테스트 가능한 API

### 1. 인증 관련 API
- **POST** `/auth/login` - 로그인
- **POST** `/auth/signup` - 회원가입
- **POST** `/auth/logout` - 로그아웃
- **POST** `/auth/refresh` - 토큰 갱신

### 2. 사용자 관련 API
- **GET** `/users/profile` - 프로필 조회
- **PUT** `/users/profile` - 프로필 수정
- **POST** `/users/follow/{userId}` - 팔로우
- **DELETE** `/users/follow/{userId}` - 언팔로우

### 3. 루틴 관련 API
- **POST** `/routines` - 루틴 생성
- **GET** `/routines` - 내 루틴 목록 조회
- **GET** `/routines/{routineId}` - 루틴 상세 조회
- **PUT** `/routines/{routineId}` - 루틴 수정
- **DELETE** `/routines/{routineId}` - 루틴 삭제

### 4. 루틴 스텝 관련 API
- **POST** `/routines/{routineId}/steps` - 스텝 생성
- **PUT** `/routines/{routineId}/steps/{stepId}` - 스텝 수정
- **DELETE** `/routines/{routineId}/steps/{stepId}` - 스텝 삭제

### 5. 태그 관련 API
- **GET** `/tags` - 태그 목록 조회
- **POST** `/tags` - 태그 생성
- **DELETE** `/tags/{tagId}` - 태그 삭제

### 6. 검색 관련 API
- **GET** `/search/routines` - 루틴 검색
- **GET** `/search/users` - 사용자 검색

## 🧪 테스트 시나리오

### 시나리오 1: 기본 인증 플로우
1. `test1@example.com` / `spring12!`로 로그인
2. 액세스 토큰과 리프레시 토큰 발급 확인
3. 토큰으로 보호된 API 호출 테스트

### 시나리오 2: 루틴 CRUD 테스트
1. 새 루틴 생성
2. 생성된 루틴 목록 조회
3. 특정 루틴 상세 조회
4. 루틴 수정
5. 루틴 삭제

### 시나리오 3: 루틴 스텝 관리
1. 기존 루틴에 스텝 추가
2. 스텝 순서 변경
3. 스텝 수정
4. 스텝 삭제

### 시나리오 4: 태그 관리
1. 전체 태그 목록 조회
2. 새 태그 생성
3. 태그 삭제

### 시나리오 5: 사용자 상호작용
1. 다른 사용자 팔로우
2. 팔로우 목록 조회
3. 팔로워 목록 조회
4. 언팔로우

## 📁 파일 구조
```
src/main/resources/
├── data.sql          # 더미데이터 (이 브랜치에서 생성)
└── application.yml   # 애플리케이션 설정
```

## 🔧 설정 방법

### 1. 데이터베이스 설정
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/moru_db
    username: {YOUR_USERNAME}
    password: {YOUR_PASSWORD}
  jpa:
    hibernate:
      ddl-auto: update
```

### 2. Redis 설정
```yaml
spring:
  data:
    redis:
      host: localhost
      port: 6379
```

### 3. JWT 설정
```yaml
jwt:
  secret: w9X37H8oCdKf4Blh5Mv2N5QwU9YeT4F2t4WJ0jB9FpE
```

## 🚀 실행 방법

### 1. 데이터베이스 준비
```bash
# MySQL 데이터베이스 생성
CREATE DATABASE moru_db;
```

### 2. Redis 서버 실행
```bash
# Redis 서버 시작
redis-server
```

### 3. 애플리케이션 실행
```bash
# Gradle로 실행
./gradlew bootRun

# 또는 IDE에서 실행
```

### 4. 더미데이터 확인
애플리케이션 시작 시 `data.sql`이 자동으로 실행되어 더미데이터가 삽입됩니다.

## 📚 API 문서
- **Swagger UI**: `http://localhost:8000/swagger-ui.html`
- **API Docs**: `http://localhost:8000/api-docs`

## 🧪 테스트 도구
- **Postman**: API 테스트
- **Swagger UI**: 브라우저에서 직접 테스트
- **curl**: 커맨드라인 테스트

## 📝 주의사항
1. 이 더미데이터는 **테스트 목적으로만** 사용하세요.
2. 실제 운영 환경에서는 절대 사용하지 마세요.
3. 데이터베이스 초기화 시 모든 데이터가 삭제됩니다.
4. UUID는 고정값을 사용하여 테스트 시 일관성을 보장합니다.

## 🔄 브랜치 관리
- 이 브랜치는 테스트 완료 후 `main` 브랜치에 머지됩니다.
- 더미데이터는 `data.sql` 파일로 관리됩니다.
- 스키마 변경 시 `schema.sql` 파일도 함께 업데이트하세요.

---

**브랜치 담당자**: MORU 개발팀  
**최종 업데이트**: 2025년 7월